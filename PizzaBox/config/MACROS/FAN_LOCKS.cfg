[gcode_macro LockFanDisabled]
gcode:
    {% set fan_last = printer["gcode_macro GLOBAL_VARS"].fan_last %}
    M106999 S{fan_last}
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock VALUE=0
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock_val VALUE=0

[gcode_macro LockFanAt0]
gcode:
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock VALUE=1
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock_val VALUE=0
    M106999 S0

[gcode_macro LockFanAt10]
gcode:
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock VALUE=1
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock_val VALUE=26
    M106999 S26

[gcode_macro LockFanAt25]
gcode:
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock VALUE=1
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock_val VALUE=64
    M106999 S64

[gcode_macro LockFanAt50]
gcode:
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock VALUE=1
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock_val VALUE=128
    M106999 S128

[gcode_macro LockFanAt100]
gcode:
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock VALUE=1
    SET_GCODE_VARIABLE MACRO=GLOBAL_VARS VARIABLE=fan_lock_val VALUE=256
    M106999 S256